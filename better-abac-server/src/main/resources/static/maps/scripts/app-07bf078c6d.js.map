{"version":3,"sources":["scripts/app-07bf078c6d.js"],"names":["module","angular","element","document","ready","$log","$window","keycloakInterval","setInterval","Keycloak","clearInterval","keycloakAuth","init","onLoad","success","authenticated","factory","$q","auth","loggedIn","authz","logout","redirectUri","location","login","logoutUrl","authServerUrl","realm","href","error","refreshAccessToken","tokenSet","token","resolve","reject","updateToken","newToken","confirm","bootstrap","reload","onAuthSuccess","onAuthRefreshSuccess","acmeNavbar","Auth","NavbarController","this","username","directive","restrict","templateUrl","scope","controller","controllerAs","bindToController","$inject","partyTypeItemEditDirective","deleteEnabled","PartyTypeItemEditDirectiveCtrl","$scope","addExternalId","party","externalIds","push","cleanExternalIds","i","length","splice","save","crudListViewItem","require","template","isActive","crudEndpoint","link","attrs","controllers","policyItemEditDirective","PolicyItemEditDirectiveCtrl","policy","crudEndpolicy","relationTypeItemEditDirective","Restangular","RelationTypeItemEditDirectiveCtrl","partyTypes","all","partyTypeEndpoint","getList","$object","relationType","partyRelationItemEditDirective","PartyRelationItemEditDirectiveCtrl","parties","partyEndpoint","relationTypes","relationTypeEndpoint","partyRelation","partyItemEditDirective","PartyItemEditDirectiveCtrl","MainCtrl","$location","_this","endpointPath","path","substr","selectedEndpoint","getPartyIds","partyId","one","get","then","sourceItem","partyTitleGenerators","fullName","item","join","createPartyRelationTitleGenerators","target","retStrTitle","titleForPartyId","forPartyId","p","type","source","crudListDirective","CrudListDirectiveCtrl","$element","newItem","clearNewItem","getNewItem","addNewItem","crudList","endpoint","removeItem","alert","pt","id","attr","crudListViewDirective","CrudListViewDirectiveCtrl","closeSelected","panels","activePanel","transclude","itemTitleGenerators","titleProps","split","colTitles","columnTitles","crudListViewItemDirective","CrudItemViewDirectiveCtrl","title","itemTitles","getTitleFromGenerator","titlePropKey","isObject","isFunction","titGenFn","titGenRes","isString","promisedTitle","resetTitle","titleStr","isArray","forEach","propName","index","trim","resTitle","resObj","newItemTitle","crudItemDirective","CrudItemDirectiveCtrl","$timeout","status","STATUS_SAVED","STATUS_SAVING","STATUS_ERROR","STATUS_IDLE","statusTmt","crudItem","isNew","res","setStatusTimeout","remove","cancel","el","runBlock","$http","$rootScope","getAuthorizationProp","Authorization","ace","config","set","$watch","setDefaultHeaders","setErrorInterceptor","response","deferred","responseHandler","merge","headers","run","routeConfig","$routeProvider","when","otherwise","redirectTo","constant","malarkey","moment","$logProvider","toastrConfig","RestangularProvider","$navbarProvider","debugEnabled","baseUrl","host","setBaseUrl","extend","defaults","activeClass","$templateCache","put"],"mappings":"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","file":"scripts/app-07bf078c6d.js","sourcesContent":["(function () {\n  'use strict';\n\n  var module = angular\n    .module('betterAbacUi', ['ngAnimate', 'ngCookies', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria', 'restangular', 'ngRoute', 'mgcrea.ngStrap', 'toastr', 'ui.ace']);\n\n  angular.element(document).ready(function ($log, $window) {\n    var keycloakInterval = setInterval(function () {\n      if (typeof Keycloak !== 'undefined') {\n        clearInterval(keycloakInterval);\n        var keycloakAuth = new Keycloak('keycloak.json');\n        //auth.loggedIn = true;\n\n        keycloakAuth.init({onLoad: 'check-sso'}/*{ onLoad: 'login-required' }*/).success(function (authenticated) {\n\n          module.factory('Auth', function ($window, $q) {\n            var auth = {\n              loggedIn: authenticated,\n              authz: keycloakAuth,\n              logout: function () {\n                auth.authz.logout({\n                  redirectUri: $window.location\n                });\n              },\n              login: function () {\n                $log('*** LOGIN');\n\n                auth.authz.login().success(function () {\n                  auth.loggedIn = true;\n                  auth.authz = keycloakAuth;\n                  auth.logoutUrl = keycloakAuth.authServerUrl + \"/realms/\" + keycloakAuth.realm + \"/tokens/logout?redirect_uri=\" + $window.location.href;\n                  module.factory('Auth', function () {\n                    return auth;\n                  });\n                }).error(function () {\n                  $log('*** LOGIN-error');\n                });\n              },\n              refreshAccessToken: function () {\n                var tokenSet = auth.authz.token != null;\n                return $q(function (resolve, reject) {\n                  auth.authz.updateToken()\n                    .success(function (newToken) {\n                      resolve(auth.authz.token);\n                    })\n                    .error(function () {\n                      if (!tokenSet || confirm(\"Could not update token. You need to authenticate again.\")) {\n                        reject();\n                        auth.login();\n                      }\n                    });\n                });\n              }\n            };\n            return auth;\n          });\n\n          angular.bootstrap(document, ['betterAbacUi']);\n        }).error(function () {\n          $window.location.reload();\n        });\n\n        keycloakAuth.onAuthSuccess = function () {\n          /*alert('onAuthSuccess');*/\n        };\n        keycloakAuth.onAuthRefreshSuccess = function () {\n          /*$log('onAuthRefreshSuccess');*/\n        };\n      }\n    }, 50);\n  });\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('acmeNavbar', acmeNavbar);\n\n  /** @ngInject */\n  function acmeNavbar(Auth) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {},\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController() {\n      this.username = Auth.username;\n      this.logout = Auth.logout;\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('partyTypeItemEdit', partyTypeItemEditDirective);\n\n  /** @ngInject */\n  function partyTypeItemEditDirective(deleteEnabled) {\n    var directive = {\n      restrict: 'A',\n      require: ['partyTypeItemEdit', '^^crudListView', 'crudItem', '^^crudListViewItem'],\n      template: '<form class=\"form\" role=\"form\">\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"name\">Name:</label>\\\n                        <input type=\"text\" class=\"form-control\" ng-model=\"crudListViewItem.item.name\" id=\"name\">\\\n                      </div>\\\n                      <div class=\"form-group\">\\\n                      <button type=\"submit\" class=\"btn btn-primary\" ng-click=\"partyCtrl.save(crudListViewItem.item)\">Save</button>\\\n                      <button ng-show=\"deleteEnabled\" type=\"button\" class=\"btn btn-default\" ng-click=\"crudListViewItem.delete(crudListViewItem.item)\"><span ng-show=\"crudListViewItem.item.id\">Delete</span><span ng-show=\"!crudListViewItem.item.id\">Clear</span></button>\\\n                      </div>\\\n                    </form>',\n      scope: {\n        isActive: '=',\n        crudEndpoint: '@'\n      },\n      controller: PartyTypeItemEditDirectiveCtrl,\n      controllerAs: 'partyCtrl',\n      bindToController: true,\n      link: function (scope, element, attrs, controllers) {\n        scope.deleteEnabled = deleteEnabled;\n        controllers[0].controllers = controllers;\n        scope.crudListViewItem = controllers[3];\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function PartyTypeItemEditDirectiveCtrl($scope) {\n\n      this.addExternalId = function (party) {\n        if (!party.externalIds) {\n          party.externalIds = []\n        }\n        party.externalIds.push(\"\")\n      };\n\n      this.cleanExternalIds = function (party) {\n        if (party.externalIds) {\n          for (var i = party.externalIds.length - 1; i >= 0; i--) {\n            if (party.externalIds[i] == null || party.externalIds[i].length < 1) {\n              party.externalIds.splice(i, 1);\n            }\n          }\n        }\n      };\n\n      this.save = function (party) {\n        this.cleanExternalIds(party);\n        $scope.crudListViewItem.save(party);\n      }\n\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('policyItemEdit', policyItemEditDirective);\n\n  /** @ngInject */\n  function policyItemEditDirective(deleteEnabled) {\n    var directive = {\n      restrict: 'A',\n      require:['policyItemEdit','^^crudListView', 'crudItem', '^^crudListViewItem'],\n      template: '<form class=\"form\" role=\"form\">\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"name\">Name:</label>\\\n                        <input type=\"text\" class=\"form-control\" ng-model=\"crudListViewItem.item.name\" id=\"name\">\\\n                      </div>\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"policy\">Policy:</label>\\\n                        <div class=\"form-control\" ng-model=\"crudListViewItem.item.policy\" id=\"policy\" ui-ace=\"{useWrapMode : true,showGutter: true,theme:\\'twilight\\',mode: \\'javascript\\'}\" style=\"height: 400px; width: 100%\"></div>\\\n                      </div>\\\n                      <div class=\"form-group\">\\\n                      <button type=\"submit\" class=\"btn btn-primary\" ng-click=\"policyCtrl.save(crudListViewItem.item)\">Save</button>\\\n                      <button ng-show=\"deleteEnabled\" type=\"button\" class=\"btn btn-default\" ng-click=\"crudListViewItem.delete(crudListViewItem.item)\"><span ng-show=\"crudListViewItem.item.id\">Delete</span><span ng-show=\"!crudListViewItem.item.id\">Clear</span></button>\\\n                      </div>\\\n                    </form>',\n      scope: {\n        isActive:'=',\n        crudEndpolicy:'@'\n      },\n      controller: PolicyItemEditDirectiveCtrl,\n      controllerAs: 'policyCtrl',\n      bindToController: true,\n      link: function (scope, element, attrs, controllers) {\n        scope.deleteEnabled = deleteEnabled;\n        controllers[0].controllers = controllers;\n        scope.crudListViewItem = controllers[3];\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function PolicyItemEditDirectiveCtrl($scope) {\n\n      this.addExternalId = function (policy) {\n        if(!policy.externalIds){\n          policy.externalIds=[]\n        }\n        policy.externalIds.push(\"\");\n      };\n\n      this.cleanExternalIds= function (policy) {\n        if(policy.externalIds){\n          for (var i = policy.externalIds.length-1; i >=0; i--) {\n            if(policy.externalIds[i]==null || policy.externalIds[i].length<1) {\n              policy.externalIds.splice(i,1);\n            }\n          }\n        }\n      };\n\n      this.save= function (policy) {\n        this.cleanExternalIds(policy);\n        $scope.crudListViewItem.save(policy);\n      }\n\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('relationTypeItemEdit', relationTypeItemEditDirective);\n\n  /** @ngInject */\n  function relationTypeItemEditDirective(deleteEnabled, Restangular) {\n    var directive = {\n      restrict: 'A',\n      require:['relationTypeItemEdit','^^crudListView', 'crudItem', '^^crudListViewItem'],\n      template: '<form class=\"form\" role=\"form\">\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"name\">Name:</label>\\\n                        <input type=\"text\" class=\"form-control\" ng-model=\"crudListViewItem.item.name\" id=\"name\">\\\n                      </div>\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"allowedSourcePartyType\">Allowed Source Party Type:</label>\\\n                        <select class=\"form-control\" ng-options=\"partyType.name as partyType.name for partyType in relationTypeCtrl.partyTypes\" ng-model=\"crudListViewItem.item.allowedSourcePartyType\"></select>\\\n                      </div>\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"allowedTargetPartyType\">Allowed Target Party Type:</label>\\\n                        <select class=\"form-control\" ng-options=\"partyType.name as partyType.name for partyType in relationTypeCtrl.partyTypes\" ng-model=\"crudListViewItem.item.allowedTargetPartyType\"></select>\\\n                      </div>\\\n                      <div class=\"form-group\">\\\n                      <button type=\"submit\" class=\"btn btn-primary\" ng-click=\"relationTypeCtrl.save(crudListViewItem.item)\">Save</button>\\\n                      <button ng-show=\"deleteEnabled\" type=\"button\" class=\"btn btn-default\" ng-click=\"crudListViewItem.delete(crudListViewItem.item)\"><span ng-show=\"crudListViewItem.item.id\">Delete</span><span ng-show=\"!crudListViewItem.item.id\">Clear</span></button>\\\n                      </div>\\\n                    </form>',\n      scope: {\n        partyTypeEndpoint:'@'\n      },\n      controller: RelationTypeItemEditDirectiveCtrl,\n      controllerAs: 'relationTypeCtrl',\n      bindToController: true,\n      link: function (scope, element, attrs, controllers) {\n        scope.deleteEnabled = deleteEnabled;\n        controllers[0].controllers = controllers;\n        scope.crudListViewItem = controllers[3];\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function RelationTypeItemEditDirectiveCtrl($scope) {\n\n      this.partyTypes = Restangular.all(this.partyTypeEndpoint).getList().$object;\n\n      this.addExternalId = function (relationType) {\n        if(!relationType.externalIds){\n          relationType.externalIds=[]\n        }\n        relationType.externalIds.push(\"\")\n      };\n\n      this.cleanExternalIds= function (relationType) {\n        if(relationType.externalIds){\n          for (var i = relationType.externalIds.length-1; i >=0; i--) {\n            if(relationType.externalIds[i]==null || relationType.externalIds[i].length<1) {\n              relationType.externalIds.splice(i,1);\n            }\n          }\n        }\n      };\n\n      this.save= function (relationType) {\n        this.cleanExternalIds(relationType);\n        $scope.crudListViewItem.save(relationType);\n      }\n\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('partyRelationItemEdit', partyRelationItemEditDirective);\n\n  /** @ngInject */\n  function partyRelationItemEditDirective(deleteEnabled, Restangular) {\n    var directive = {\n      restrict: 'A',\n      require: ['partyRelationItemEdit', '^^crudListView', 'crudItem', '^^crudListViewItem'],\n      template: '<form class=\"form\" role=\"form\">\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"source\">Source:</label>\\\n                        <select class=\"form-control\" ng-options=\"sourceParty.id as (sourceParty.type +\\' | ids: \\'+ sourceParty.externalIds.join(\\', \\')) for sourceParty in partyRelationCtrl.parties\" ng-model=\"crudListViewItem.item.source\"></select>\\\n                      </div>\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"relationType\">Relation Type:</label>\\\n                        <select class=\"form-control\" ng-options=\"relationType.name as relationType.name for relationType in partyRelationCtrl.relationTypes\" ng-model=\"crudListViewItem.item.relationType\"></select>\\\n                      </div>\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"target\">Target:</label>\\\n                        <select class=\"form-control\" ng-options=\"sourceParty.id as (sourceParty.type +\\' | ids: \\'+ sourceParty.externalIds.join(\\', \\')) for sourceParty in partyRelationCtrl.parties\" ng-model=\"crudListViewItem.item.target\"></select>\\\n                        <select class=\"form-control\" ng-options=\"sourceParty.id as (sourceParty.type +\\' | ids: \\'+ sourceParty.externalIds.join(\\', \\')) for sourceParty in partyRelationCtrl.parties\" ng-model=\"crudListViewItem.item.target\"></select>\\\n                      </div>\\\n                      <div class=\"form-group form-inline\">\\\n                        <label class=\"control-label\"><i class=\"fa fa-calendar\"></i> Valid Until:</label><br>\\\n                        <div class=\"form-group\">\\\n                          <input type=\"text\" size=\"10\" class=\"form-control\" ng-model=\"crudListViewItem.item.validUntil\" data-autoclose=\"1\" placeholder=\"Date\" bs-datepicker>\\\n                        </div>\\\n                        <div class=\"form-group\">\\\n                          <input type=\"text\" size=\"8\" class=\"form-control\" ng-model=\"crudListViewItem.item.validUntil\" data-time-format=\"h:mm:ss a\" data-autoclose=\"1\" placeholder=\"Time\" bs-timepicker>\\\n                        </div>\\\n                      </div>\\\n                      <div class=\"form-group\">\\\n                      <button type=\"submit\" class=\"btn btn-primary\" ng-click=\"partyRelationCtrl.save(crudListViewItem.item)\">Save</button>\\\n                      <button ng-show=\"deleteEnabled\" type=\"button\" class=\"btn btn-default\" ng-click=\"crudListViewItem.delete(crudListViewItem.item)\"><span ng-show=\"crudListViewItem.item.id\">Delete</span><span ng-show=\"!crudListViewItem.item.id\">Clear</span></button>\\\n                      </div>\\\n                    </form>',\n      scope: {\n        isActive: '=',\n        relationTypeEndpoint: '@',\n        partyEndpoint: '@'\n      },\n      controller: PartyRelationItemEditDirectiveCtrl,\n      controllerAs: 'partyRelationCtrl',\n      bindToController: true,\n      link: function (scope, element, attrs, controllers) {\n        scope.deleteEnabled = deleteEnabled;\n        controllers[0].controllers = controllers;\n        scope.crudListViewItem = controllers[3];\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function PartyRelationItemEditDirectiveCtrl($scope) {\n\n      this.parties = Restangular.all(this.partyEndpoint).getList().$object;\n      this.relationTypes = Restangular.all(this.relationTypeEndpoint).getList().$object;\n\n      this.addExternalId = function (partyRelation) {\n        if (!partyRelation.externalIds) {\n          partyRelation.externalIds = []\n        }\n        partyRelation.externalIds.push(\"\")\n      };\n\n      this.cleanExternalIds = function (partyRelation) {\n        if (partyRelation.externalIds) {\n          for (var i = partyRelation.externalIds.length - 1; i >= 0; i--) {\n            if (partyRelation.externalIds[i] == null || partyRelation.externalIds[i].length < 1) {\n              partyRelation.externalIds.splice(i, 1);\n            }\n          }\n        }\n      };\n\n      this.save = function (partyRelation) {\n        this.cleanExternalIds(partyRelation);\n        $scope.crudListViewItem.save(partyRelation);\n      }\n\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('partyItemEdit', partyItemEditDirective);\n\n  /** @ngInject */\n  function partyItemEditDirective(deleteEnabled, Restangular) {\n    var directive = {\n      restrict: 'A',\n      require: ['partyItemEdit', '^^crudListView', 'crudItem', '^^crudListViewItem'],\n      template: '<form class=\"form\" role=\"form\">\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"type\">Type:</label>\\\n                        <select class=\"form-control\" ng-options=\"partyType.name as partyType.name for partyType in partyCtrl.partyTypes\" ng-model=\"crudListViewItem.item.type\"></select>\\\n                      </div>\\\n                      <div class=\"form-group form-inline\">\\\n                        <label for=\"exId\">External Ids:</label>\\\n                        <input type=\"text\" class=\"form-control\" ng-repeat=\"exId in crudListViewItem.item.externalIds track by $index\" ng-model=\"crudListViewItem.item.externalIds[$index]\" ng-blur=\"partyCtrl.cleanExternalIds(crudListViewItem.item)\">\\\n                        <button type=\"button\" ng-click=\"partyCtrl.addExternalId(crudListViewItem.item)\" class=\"btn btn-success\">+</button> \\\n                      </div>\\\n                      <div class=\"form-group\">\\\n                      <button type=\"submit\" class=\"btn btn-primary\" ng-click=\"partyCtrl.save(crudListViewItem.item)\">Save</button>\\\n                      <button ng-show=\"deleteEnabled\" type=\"button\" class=\"btn btn-default\" ng-click=\"crudListViewItem.delete(crudListViewItem.item)\"><span ng-show=\"crudListViewItem.item.id\">Delete</span><span ng-show=\"!crudListViewItem.item.id\">Clear</span></button>\\\n                      </div>\\\n                    </form>',\n      scope: {\n        partyTypeEndpoint: '@'\n      },\n      controller: PartyItemEditDirectiveCtrl,\n      controllerAs: 'partyCtrl',\n      bindToController: true,\n      link: function (scope, element, attrs, controllers) {\n        scope.deleteEnabled = deleteEnabled;\n        controllers[0].controllers = controllers;\n        scope.crudListViewItem = controllers[3];\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function PartyItemEditDirectiveCtrl($scope) {\n\n      this.partyTypes = Restangular.all(this.partyTypeEndpoint).getList().$object;\n\n      this.addExternalId = function (party) {\n        if (!party.externalIds) {\n          party.externalIds = []\n        }\n        party.externalIds.push(\"\")\n      };\n\n      this.cleanExternalIds = function (party) {\n        if (party.externalIds) {\n          for (var i = party.externalIds.length - 1; i >= 0; i--) {\n            if (party.externalIds[i] == null || party.externalIds[i].length < 1) {\n              party.externalIds.splice(i, 1);\n            }\n          }\n        }\n      };\n\n      this.save = function (party) {\n        this.cleanExternalIds(party);\n        $scope.crudListViewItem.save(party);\n      }\n\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .controller('MainCtrl', MainCtrl);\n\n  /** @ngInject */\n  function MainCtrl($location, $q, Restangular) {\n    var _this = this;\n    var endpointPath = $location.path().substr(1);\n    _this.selectedEndpoint = endpointPath;\n\n    var getPartyIds = function (partyId) {\n      return $q(function (resolve, reject) {\n        Restangular.one('party', partyId).get().then(function (sourceItem) {\n          resolve(sourceItem);\n        });\n      });\n    };\n\n    _this.partyTitleGenerators = {\n      fullName: function (item) {\n        if (!item.fullName) {\n          return item.externalIds ? item.externalIds.join(', ') : 'no external ids'\n        }\n        return item.fullName;\n      }\n    };\n\n    _this.createPartyRelationTitleGenerators = {\n\n      target: function (item) {\n        var retStrTitle = '';\n        if (item && item.target) {\n          return $q(function (resolve) {\n            _this.createPartyRelationTitleGenerators.titleForPartyId(item.target, resolve);\n          });\n        }\n        return retStrTitle;\n      },\n\n      titleForPartyId: function (forPartyId, resolve) {\n        getPartyIds(forPartyId).then(function (p) {\n          var retStrTitle = p.type;\n          if (p.externalIds != null) {\n            if (p.fullName) {\n              retStrTitle += ' ' + p.fullName;\n            } else {\n              retStrTitle += ' ' + p.externalIds ? p.externalIds.join(', ') : '';\n            }\n          }\n          resolve(retStrTitle)\n        });\n      },\n\n      source: function (item) {\n        var retStrTitle = '';\n        if (item && item.source) {\n          return $q(function (resolve) {\n            _this.createPartyRelationTitleGenerators.titleForPartyId(item.source, resolve);\n          });\n        }\n        return retStrTitle;\n      }\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('crudList', crudListDirective);\n\n  /** @ngInject */\n  function crudListDirective(Restangular) {\n    var directive = {\n      restrict: 'A',\n      template: '',\n      controller: CrudListDirectiveCtrl,\n      controllerAs: 'crudListCtrl',\n      bindToController: true,\n      require: ['crudList'],//,'crudListView'],\n      link: function (scope, element, attr, controllers) {\n        controllers[0].controllers = controllers;\n        if (controllers[0].crudList == null) {\n          controllers[0].crudList = Restangular.all(controllers[0].crudEndpoint).getList().$object\n        }\n      },\n      scope: {\n        crudList: '=',\n        crudEndpoint: '@'\n      }\n\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function CrudListDirectiveCtrl($scope, $element, deleteEnabled) {\n      this.newItem;\n\n      this.clearNewItem = function () {\n        this.newItem = this.getNewItem(this.crudEndpoint);\n      };\n\n      this.addNewItem = function (item) {\n        this.crudList.push(item);\n      };\n\n      this.getNewItem = function (endpoint) {\n        return Restangular.one(endpoint, null);\n      };\n\n      this.removeItem = function (item) {\n        if (!deleteEnabled) {\n          alert(\"Removing item is not allowed.\");\n          return\n        }\n        for (var i = 0; i < this.crudList.length; i++) {\n          var pt = this.crudList[i];\n          if (pt.id == item.id) {\n            this.crudList.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('crudListView', crudListViewDirective);\n\n  /** @ngInject */\n  function crudListViewDirective() {\n    var directive = {\n      restrict: 'E',\n      transclude:true,\n      template: '<div ng-model=\"panels.activePanel\" role=\"tablist\" aria-multiselectable=\"true\" bs-collapse>\\\n                  <div class=\"panel-group\">\\\n                    <div crud-list-view-item crud-item item=\"crudListViewCtrl.controllers[1].newItem\" is-active=\"panels.activePanel===0\">\\\n                      <div ng-transclude></div>\\\n                    </div>\\\n                  </div>\\\n                  <div class=\"panel\">\\\n                    <div class=\"panel-heading column-titles\">\\\n                      <div class=\"row\">\\\n                        <div class=\"col-xs-4\">{{crudListViewCtrl.colTitles[0]}}</div><div class=\"col-xs-4\">{{crudListViewCtrl.colTitles[1]}}</div><div class=\"col-xs-4\">{{crudListViewCtrl.colTitles[2]}}</div> \\\n                      </div>\\\n                    </div>\\\n                  </div>\\\n                  <div class=\"panel-group\" ng-repeat=\"crudItem in crudListViewCtrl.controllers[1].crudList\">\\\n                      <div crud-list-view-item crud-item item=\"crudItem\" is-active=\"panels.activePanel===$index+1\">\\\n                        <div ng-transclude></div>\\\n                      </div>\\\n                  </div>\\\n                 </div>',\n      scope: {\n        itemTitleGenerators:'='\n      },\n      require:['crudListView','^^crudList'],\n      controller: CrudListViewDirectiveCtrl,\n      controllerAs: 'crudListViewCtrl',\n      bindToController: true,\n      link: function (scope, element, attr, controllers) {\n        controllers[0].controllers = controllers;\n        controllers[1].clearNewItem();\n        controllers[0].titleProps = attr.titleProps ? attr.titleProps.split(';') : [];\n        ///controllers[0].itemTitleGenerators = controllers[0].itemTitleGenerators;\n        controllers[0].colTitles = attr.columnTitles ? attr.columnTitles.split(';') : [];\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function CrudListViewDirectiveCtrl($scope) {\n      this.closeSelected= function () {\n        $scope.panels.activePanel=-1;\n      }\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('crudListViewItem', crudListViewItemDirective);\n\n  /** @ngInject */\n  function crudListViewItemDirective($q) {\n    var directive = {\n      restrict: 'A',\n      require: ['crudListViewItem', '^^crudListView', 'crudItem', \"^^crudList\"],\n      transclude: true,\n      template: '<div class=\"panel \"  ng-class=\"{\\'panel-info\\':!crudItemViewCtrl.isActive && !crudItemViewCtrl.controllers[2].status, \\'panel-primary\\':crudItemViewCtrl.isActive && (!crudItemViewCtrl.controllers[2].status || crudItemViewCtrl.controllers[2].status==crudItemViewCtrl.controllers[2].STATUS_SAVING), \\'panel-success\\':crudItemViewCtrl.controllers[2].status==crudItemViewCtrl.controllers[2].STATUS_SAVED, \\'panel-error\\':crudItemViewCtrl.controllers[2].status==crudItemViewCtrl.controllers[2].STATUS_ERROR}\">\\\n                    <div class=\"panel-heading cursor-pointer\" role=\"tab\" bs-collapse-toggle>\\\n                      <div class=\"row\" ng-show=\"crudItemViewCtrl.item.id\">\\\n                        <div class=\"col-xs-4\" ng-bind-html=\"crudItemViewCtrl.itemTitles[0]\"></div><div class=\"col-xs-4\" ng-bind-html=\"crudItemViewCtrl.itemTitles[1]\"></div><div class=\"col-xs-4\" ng-bind-html=\"crudItemViewCtrl.itemTitles[2]\"></div> \\\n                      </div>\\\n                      <h4 class=\"panel-title\">\\\n                          <button class=\"btn btn-default\" ng-show=\"crudItemViewCtrl.newItemTitle\">{{crudItemViewCtrl.newItemTitle}}</button> \\\n                          <a ng-show=\"!crudItemViewCtrl.newItemTitle\">\\\n                            <!--<span class=\"badge\">{{ crudItemViewCtrl.item.id }}</span>-->\\\n                            <span ng-show=\"crudItemViewCtrl.controllers[2].status==crudItemViewCtrl.controllers[2].STATUS_SAVED\" class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span> \\\n                            <!--<span ng-bind-html=\"crudItemViewCtrl.title\"></span>--> \\\n                            <!--<span class=\"glyphicon glyphicon-menu-right\"></span>--> \\\n                            {{crudItemViewCtrl.newItemTitle}} <!--{{crudItemViewCtrl.controllers[3].crudEndpoint}}--> \\\n                            <span ng-show=\"crudItemViewCtrl.controllers[2].status==crudItemViewCtrl.controllers[2].STATUS_ERROR\"> | item was not updated</span>\\\n                          </a>\\\n                      </h4>\\\n                    </div>\\\n                    <div class=\"panel-collapse\" role=\"tabpanel\" bs-collapse-target>\\\n                      <div class=\"panel-body\">\\\n                      <div ng-if=\"crudItemViewCtrl.isActive\"><div ng-transclude></div>\\\n                      </div>\\\n                          \\\n                      </div>\\\n                    </div>\\\n                </div>',\n      scope: {\n        item: '=',\n        isActive: '='\n      },\n      controller: CrudItemViewDirectiveCtrl,\n      controllerAs: 'crudItemViewCtrl',\n      bindToController: true,\n      link: function (scope, element, attrs, controllers) {\n\n        controllers[0].controllers = controllers;\n\n        if (!controllers[0].item || !controllers[0].item.id) {\n          controllers[0].newItemTitle = \" create new \";\n        }\n        controllers[0].resetTitle();\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function CrudItemViewDirectiveCtrl() {\n\n      var _this = this;\n\n      this.title;\n      this.itemTitles = [];\n\n      var getTitleFromGenerator = function (titlePropKey) {\n        return $q(function (resolve) {\n          if (_this.controllers[1].itemTitleGenerators && angular.isObject(_this.controllers[1].itemTitleGenerators) && angular.isFunction(_this.controllers[1].itemTitleGenerators[titlePropKey])) {\n            var titGenFn = _this.controllers[1].itemTitleGenerators[titlePropKey];\n            //_this.controllers[1].itemTitleGenerators.forEach(function (titGenFn, ind) {\n            var titGenRes = titGenFn(_this.item);\n            if (angular.isString(titGenRes)) {\n              resolve(titGenRes);\n            } else if (titGenRes && angular.isFunction(titGenRes.then)) {\n              titGenRes.then(function (promisedTitle) {\n                resolve(promisedTitle);\n              })\n            }else{\n              resolve( null );\n            }\n            //});\n            /*var titleRes = _this.controllers[1].itemTitleGenerators(this.item);\n             if (angular.isString(titleRes)) {\n             titleStr = titleRes;\n             } else if (titleRes && angular.isFunction(titleRes.then)) {\n             titleRes.then(function (promisedTitle) {\n             _this.title = promisedTitle;\n             })\n             }*/\n          }else{\n            resolve( null );\n          }\n        })\n      };\n\n      this.resetTitle = function () {\n        if (this.item && this.item.id) {\n          var titleStr = '';\n          /*if (_this.controllers[1].itemTitleGenerators && angular.isArray(_this.controllers[1].itemTitleGenerators)) {\n            _this.controllers[1].itemTitleGenerators.forEach(function (titGenFn, ind) {\n              var titGenRes = titGenFn(this.item, ind);\n              if (angular.isString(titGenRes)) {\n                _this.itemTitles.push(titGenRes);\n              } else if (titleRes && angular.isFunction(titleRes.then)) {\n                titleRes.then(function (promisedTitle) {\n                  _this.itemTitles[ind] = promisedTitle;\n                })\n              }\n            });\n            /!*var titleRes = _this.controllers[1].itemTitleGenerators(this.item);\n            if (angular.isString(titleRes)) {\n              titleStr = titleRes;\n            } else if (titleRes && angular.isFunction(titleRes.then)) {\n              titleRes.then(function (promisedTitle) {\n                _this.title = promisedTitle;\n              })\n            }*!/\n          }*/\n\n          if (!titleStr && angular.isArray(_this.controllers[1].titleProps)) {\n            _this.controllers[1].titleProps.forEach(function (propName, index) {\n                /*if (propName.indexOf(';') >= 0) {\n                  propName.split(';').forEach(function (p) {\n                    var itmVal = _this.item[p.trim()];\n                    if (itmVal == null) {\n                      itmVal = '';\n                    }\n                    _this.itemTitles.push(itmVal);\n                    titleStr += itmVal + ' ';\n                  });\n                } else {*/\n\n                  var propName = propName.trim();\n                  getTitleFromGenerator(propName).then(function(resTitle){\n                    if(resTitle==null){\n                      resTitle = _this.item[propName];\n                    }\n                    if (resTitle == null) {\n                      resTitle = propName;\n                    }\n                    _this.itemTitles[index]=resTitle\n                  });\n\n                  ///titleStr += itmVal + ' ';\n                //}\n              }\n            );\n          }\n\n          ///_this.title = titleStr;\n        }\n\n      }\n      ;\n\n      this.delete = function (item) {\n        if (item.id) {\n          this.controllers[2].delete(item);\n          this.controllers[1].closeSelected();\n        } else {\n          this.controllers[3].clearNewItem();\n        }\n      };\n\n      this.save = function () {\n        _this.resetTitle();\n        this.controllers[2].save(this.item).then(function (resObj) {\n          if (resObj.id == _this.item.id) {\n            _this.item = resObj;\n          }\n          _this.controllers[3].clearNewItem();\n          _this.resetTitle();\n        }, function () {\n          //leave form on error\n        });\n      }\n\n    }\n  }\n\n})\n();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .directive('crudItem', crudItemDirective);\n\n  /** @ngInject */\n  function crudItemDirective() {\n    var directive = {\n      restrict: 'A',\n      template: '',\n      controller: CrudItemDirectiveCtrl,\n      controllerAs: 'crudItemCtrl',\n      bindToController: true,\n      require: ['crudItem', '^^crudList'],\n      link: function (scope, el, attr, controllers) {\n        controllers[0].controllers = controllers;\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function CrudItemDirectiveCtrl($scope, $element, $timeout, $q, deleteEnabled) {\n      var _this = this;\n      this.status = '';\n      this.STATUS_SAVED = 'saved';\n      this.STATUS_SAVING = 'saving';\n      this.STATUS_ERROR = 'error';\n      this.STATUS_IDLE = '';\n      this.statusTmt;\n\n\n      this.save = function (crudItem) {\n        this.status = this.STATUS_SAVING;\n        var isNew = !crudItem.id;\n        return $q(function (resolve, reject) {\n          crudItem.save().then(\n            function (res) {\n              if (isNew) {\n                _this.controllers[1].addNewItem(res);\n              }\n              setStatusTimeout(_this.STATUS_SAVED);\n              resolve(res, _this.STATUS_SAVED);\n            },\n            function () {\n              setStatusTimeout(_this.STATUS_ERROR);\n              reject(_this.STATUS_ERROR)\n            });\n        });\n      };\n\n      this.delete = function (crudItem) {\n        if (crudItem.id) {\n          if (!deleteEnabled) {\n            alert(\"Deleting is not allowed.\");\n            return\n          }\n          crudItem.remove().then(function () {\n            _this.controllers[1].removeItem(crudItem);\n          }, function () {\n            setStatusTimeout(_this.STATUS_ERROR)\n          });\n        } else {\n          this.controllers[1].clearNewItem();\n        }\n      };\n\n      var setStatusTimeout = function (status) {\n        _this.status = status;\n        $timeout.cancel(_this.statusTmt);\n        _this.statusTmt = $timeout(function () {\n          _this.status = '';\n        }, 2000);\n      }\n\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log, Restangular, Auth, $http, $rootScope) {\n\n    if (ace) {\n      ace.config.set('basePath', 'aceFiles');\n    }\n\n    function getAuthorizationProp(token) {\n      return {Authorization: 'Bearer ' + token};\n    }\n\n    $rootScope.$watch(function () {\n      return Auth.authz.token;\n    }, function (newToken) {\n      if (newToken) {\n        Restangular.setDefaultHeaders(getAuthorizationProp(newToken));\n      }\n    });\n\n    Restangular.setErrorInterceptor(function (response, deferred, responseHandler) {\n\n      if (response.status === 401 || response.status === -1) {\n        Auth.refreshAccessToken().then(function (newToken) {\n          angular.merge(response.config.headers, getAuthorizationProp(newToken));\n          $http(response.config).then(responseHandler, deferred.reject);\n        });\n        return false; // error handled\n      }\n\n      return true; // error not handled\n    });\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .config(routeConfig);\n\n  function routeConfig($routeProvider) {\n    $routeProvider\n      .when('/party', {\n        templateUrl: 'app/main/main-list.html',\n        controller: 'MainCtrl',\n        controllerAs: 'mainCtrl'\n      })\n      .when('/partyType', {\n        templateUrl: 'app/main/main-list.html',\n        controller: 'MainCtrl',\n        controllerAs: 'mainCtrl'\n      })\n      .when('/partyRelation', {\n        templateUrl: 'app/main/main-list.html',\n        controller: 'MainCtrl',\n        controllerAs: 'mainCtrl'\n      })\n      .when('/relationType', {\n        templateUrl: 'app/main/main-list.html',\n        controller: 'MainCtrl',\n        controllerAs: 'mainCtrl'\n      })\n      .when('/policy', {\n        templateUrl: 'app/main/main-list.html',\n        controller: 'MainCtrl',\n        controllerAs: 'mainCtrl'\n      })\n      .otherwise({\n        redirectTo: '/party'\n      });\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .constant('malarkey', malarkey)\n    .constant('moment', moment)\n    .constant('deleteEnabled', true);\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('betterAbacUi')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig, RestangularProvider, $navbarProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n    var baseUrl = 'rest/v1/admin';\n    if (location.host == \"localhost:3000\") {\n      baseUrl = 'http://localhost:8080' + baseUrl;\n    }\n    RestangularProvider.setBaseUrl(baseUrl);\n    angular.extend($navbarProvider.defaults, {\n      activeClass: 'in'\n    });\n  }\n\n})();\n\nangular.module(\"betterAbacUi\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main-list.html\",\"<div class=\\\"container\\\"><div><acme-navbar></acme-navbar></div><div ng-if=\\\"mainCtrl.selectedEndpoint==\\'party\\'\\\" crud-list=\\\"mainCtrl.partyList\\\" crud-endpoint=\\\"{{mainCtrl.selectedEndpoint}}\\\"><h2>Party</h2><crud-list-view title-props=\\\"id;fullName;type\\\" item-title-generators=\\\"mainCtrl.partyTitleGenerators\\\" column-titles=\\\"Id;Name;Type\\\"><div party-item-edit=\\\"\\\" crud-item=\\\"\\\" party-type-endpoint=\\\"partyType\\\"></div></crud-list-view></div><div ng-if=\\\"mainCtrl.selectedEndpoint==\\'partyType\\'\\\" crud-list=\\\"mainCtrl.partyTypeList\\\" crud-endpoint=\\\"{{mainCtrl.selectedEndpoint}}\\\"><h2>Party Type</h2><crud-list-view title-props=\\\"id; name\\\" column-titles=\\\"Id;Name\\\"><div party-type-item-edit=\\\"\\\" crud-item=\\\"\\\"></div></crud-list-view></div><div ng-if=\\\"mainCtrl.selectedEndpoint==\\'policy\\'\\\" crud-list=\\\"mainCtrl.partyTypeList\\\" crud-endpoint=\\\"{{mainCtrl.selectedEndpoint}}\\\"><h2>Policy</h2><crud-list-view title-props=\\\"name\\\"><div policy-item-edit=\\\"\\\" crud-item=\\\"\\\"></div></crud-list-view></div><div ng-if=\\\"mainCtrl.selectedEndpoint==\\'relationType\\'\\\" crud-list=\\\"mainCtrl.partyTypeList\\\" crud-endpoint=\\\"{{mainCtrl.selectedEndpoint}}\\\"><h2>Relation Type</h2><crud-list-view title-props=\\\"id; name\\\" column-titles=\\\"Id;Name\\\"><div relation-type-item-edit=\\\"\\\" crud-item=\\\"\\\" party-type-endpoint=\\\"partyType\\\"></div></crud-list-view></div><div ng-if=\\\"mainCtrl.selectedEndpoint==\\'partyRelation\\'\\\" crud-list=\\\"mainCtrl.partyTypeList\\\" crud-endpoint=\\\"{{mainCtrl.selectedEndpoint}}\\\"><h2>Party Relation</h2><crud-list-view title-props=\\\"source;relationType; target\\\" item-title-generators=\\\"mainCtrl.createPartyRelationTitleGenerators\\\" column-titles=\\\"Source;Relation Type; Target\\\"><div party-relation-item-edit=\\\"\\\" crud-item=\\\"\\\" party-endpoint=\\\"party\\\" relation-type-endpoint=\\\"relationType\\\"></div></crud-list-view></div></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<nav class=\\\"navbar navbar-default\\\" role=\\\"navigation\\\" bs-navbar=\\\"\\\"><div class=\\\"navbar-header\\\"><a class=\\\"navbar-brand\\\" href=\\\"#\\\">Better ABAC</a></div><ul class=\\\"nav navbar-nav navbar-left\\\"><li data-match-route=\\\"/party\\\"><a href=\\\"#/party\\\">Party</a></li><li data-match-route=\\\"/partyRelation\\\"><a href=\\\"#/partyRelation\\\">Party Relation</a></li><li data-match-route=\\\"/policy\\\"><a href=\\\"#/policy\\\">Policy</a></li><li data-match-route=\\\"/partyType\\\"><a href=\\\"#/partyType\\\">Party Type</a></li><li data-match-route=\\\"/relationType\\\"><a href=\\\"#/relationType\\\">Relation Type</a></li></ul><ul class=\\\"nav navbar-nav navbar-right\\\"><li class=\\\"navbar-username\\\"><a ng-click=\\\"vm.logout()\\\" class=\\\"navbar-link\\\"><span class=\\\"glyphicon glyphicon glyphicon-off alert\\\"></span>{{vm.username}}</a></li></ul></nav>\");}]);"],"sourceRoot":"/source/"}